webpackJsonp([27,78],{"7/Ej":function(e,t){},"9hcn":function(e,t){},R6G1:function(e,t,a){"use strict";function i(e){return new v.a(function(t,a){var i=new FileReader;i.readAsDataURL(e),i.onload=function(){return t(i.result)},i.onerror=function(e){return a(e)}})}Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),s=a.n(r),n=a("Xxa5"),o=a.n(n),l=a("exGp"),c=a.n(l),p=a("Dd8w"),d=a.n(p),u=a("//Fk"),v=a.n(u),h=a("NYxO"),_={labelCol:{span:24},wrapperCol:{span:24}},f={name:"RepairEdit",props:{repairEditVisiable:{default:!1},housesData:{type:Object}},watch:{repairEditVisiable:function(e){var t=this;e&&this.$get("/cos/repair-info/repairInfoById",{repairId:this.housesData.repairId}).then(function(e){t.repairData=e.data,null!==t.repairData.images&&""!==t.repairData.images&&t.imagesInit(t.repairData.images)})}},computed:d()({},Object(h.c)({currentUser:function(e){return e.account.user}}),{show:{get:function(){return this.repairEditVisiable},set:function(){}}}),mounted:function(){this.getWorkerList()},data:function(){return{rowId:null,formItemLayout:_,form:this.$form.createForm(this),loading:!1,fileList:[],previewVisible:!1,previewImage:"",workerId:null,repairData:null,workerList:""}},methods:{repairDone:function(){var e=this;this.$get("/cos/repair-info/down",{repairId:this.repairData.id}).then(function(t){e.$emit("success")})},getWorkerList:function(){var e=this;this.$get("/cos/worker-info/list",{type:2}).then(function(t){e.workerList=t.data.data})},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return c()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e.url||e.preview){a.next=4;break}return a.next=3,i(e.originFileObj);case 3:e.preview=a.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return a.stop()}},a,t)}))()},picHandleChange:function(e){var t=e.fileList;this.fileList=t},imagesInit:function(e){if(null!==e&&""!==e){var t=[];e.split(",").forEach(function(e,a){t.push({uid:a,name:e,status:"done",url:"http://backend.my.org/imagesWeb/"+e})}),this.fileList=t}},reset:function(){this.loading=!1,this.form.resetFields()},onClose:function(){this.reset(),this.$emit("close")},handleSubmit:function(){var e=this,t=s()(this.repairData,{});null!==this.workerId?(t.worker=this.workerId,this.$put("/cos/repair-info",t).then(function(t){e.workerId=null,e.$emit("success")}).catch(function(){e.loading=!1})):this.$message.warning("请选择工作人员！")}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"查看维修信息",width:800},on:{cancel:e.onClose},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:e.onClose}},[e._v("\n      关闭\n    ")]),e._v(" "),1==e.repairData.repairStatus?a("a-button",{on:{click:e.repairDone}},[e._v("\n      维修完成\n    ")]):e._e()],1),e._v(" "),null!==e.repairData?a("div",{staticStyle:{"font-size":"13px"}},[a("div",{staticStyle:{"font-size":"25px",color:"#000c17","text-align":"center"}},[0==e.repairData.repairStatus?a("p",[e._v("请稍后，正在为您指定维修人员")]):e._e(),e._v(" "),1==e.repairData.repairStatus?a("p",[e._v("维修人员正在路上！")]):e._e()]),e._v(" "),a("a-row",{staticStyle:{"padding-left":"24px","padding-right":"24px"}},[a("a-col",{staticStyle:{"margin-bottom":"15px"}},[a("span",{staticStyle:{"font-size":"15px","font-weight":"650",color:"#000c17"}},[e._v("基础信息")])]),e._v(" "),a("a-col",{attrs:{span:8}},[a("b",[e._v("业主姓名：")]),e._v("\n        "+e._s(e.repairData.name)+"\n      ")]),e._v(" "),a("a-col",{attrs:{span:8}},[a("b",[e._v("联系电话：")]),e._v("\n        "+e._s(e.repairData.phone)+"\n      ")]),e._v(" "),a("a-col",{attrs:{span:8}},[a("b",[e._v("上次登陆时间：")]),e._v("\n        "+e._s(null!==e.repairData.lastTime?e.repairData.lastTime:"- -")+"\n      ")])],1),e._v(" "),a("br"),e._v(" "),a("a-row",{staticStyle:{"padding-left":"24px","padding-right":"24px"}},[a("a-col",{attrs:{span:8}},[a("b",[e._v("维修编号：")]),e._v("\n        "+e._s(e.repairData.code)+"\n      ")]),e._v(" "),a("a-col",{attrs:{span:16}},[a("b",[e._v("维修内容：")]),e._v("\n        "+e._s(e.repairData.content)+"\n      ")])],1),e._v(" "),a("br"),e._v(" "),a("a-row",{staticStyle:{"padding-left":"24px","padding-right":"24px"}},[a("a-col",{attrs:{span:24}},[a("a-upload",{attrs:{name:"avatar",action:"http://backend.my.org/file/fileUpload/","list-type":"picture-card",disabled:"","file-list":e.fileList},on:{preview:e.handlePreview,change:e.picHandleChange}}),e._v(" "),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)],1),e._v(" "),a("br"),e._v(" "),a("a-row",{staticStyle:{"padding-left":"24px","padding-right":"24px"}},[a("a-col",{attrs:{span:8}},[a("b",[e._v("维修状态：")]),e._v(" "),0==e.repairData.repairStatus?a("span",[e._v("未派修")]):e._e(),e._v(" "),1==e.repairData.repairStatus?a("span",[e._v("已派修")]):e._e(),e._v(" "),2==e.repairData.repairStatus?a("span",[e._v("已完成")]):e._e()]),e._v(" "),a("a-col",{attrs:{span:16}},[a("b",[e._v("创建时间：")]),e._v("\n        "+e._s(e.repairData.createDate)+"\n      ")])],1),e._v(" "),a("br"),e._v(" "),a("a-row",{staticStyle:{"padding-left":"24px","padding-right":"24px"}},[a("a-col",{attrs:{span:8}},[a("b",[e._v("房屋地址：")]),e._v(" "),a("a-tooltip",[a("template",{slot:"title"},[e._v("\n            "+e._s(e.repairData.address)+"\n          ")]),e._v("\n          "+e._s(e.repairData.address.slice(0,10))+" ...\n        ")],2)],1),e._v(" "),a("a-col",{attrs:{span:8}},[a("b",[e._v("房间号：")]),e._v("\n        "+e._s(e.repairData.number)+" 室\n      ")]),e._v(" "),a("a-col",{attrs:{span:8}},[a("b",[e._v("楼层：")]),e._v("\n        "+e._s(e.repairData.floor)+" 层\n      ")])],1),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),null!==e.repairData.worker?a("a-row",{staticStyle:{"padding-left":"24px","padding-right":"24px"}},[a("a-col",{staticStyle:{"margin-bottom":"15px"}},[a("span",{staticStyle:{"font-size":"15px","font-weight":"650",color:"#000c17"}},[e._v("维修员工信息")])]),e._v(" "),a("a-col",{attrs:{span:8}},[a("b",[e._v("员工姓名：")]),e._v(" "),a("a-popover",[a("template",{slot:"content"},[null!==e.repairData.workerImage?a("a-avatar",{attrs:{shape:"square",size:132,icon:"user",src:"http://backend.my.org/imagesWeb/"+e.repairData.workerImage.split(",")[0]}}):a("a-avatar",{attrs:{shape:"square",size:132,icon:"user"}})],1),e._v(" "),a("a",[e._v(e._s(null!==e.repairData.workerName?e.repairData.workerName:"- -"))])],2)],1),e._v(" "),a("a-col",{attrs:{span:8}},[a("b",[e._v("联系电话：")]),e._v("\n        "+e._s(e.repairData.workerPhone)+"\n      ")])],1):e._e(),e._v(" "),a("br"),e._v(" "),a("br")],1):e._e()],2)},staticRenderFns:[]},b=a("VU/8")(f,g,!1,function(e){a("9hcn")},"data-v-265852c0",null);t.default=b.exports},"oo/1":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),r=a.n(i),s=a("NYxO"),n=a("2VXB"),o=a("V+G8"),l=a("R6G1"),c={name:"Houses",components:{HousesView:n.default,RepairAdd:o.default,RepairEdit:l.default},data:function(){return{loading:!1,housesList:[],repairAdd:{visiable:!1,data:null},housesView:{visiable:!1,data:null},repairEdit:{visiable:!1,data:null}}},computed:r()({},Object(s.c)({currentUser:function(e){return e.account.user}})),mounted:function(){this.housesInfoByOwnerId()},methods:{edit:function(e){this.repairEdit.data=e,this.repairEdit.visiable=!0},handleRepairEditClose:function(){this.repairEdit.visiable=!1},handleRepairEditSuccess:function(){this.repairEdit.visiable=!1,this.$message.success("修改成功"),this.housesInfoByOwnerId()},add:function(e){this.repairAdd.data=e,this.repairAdd.visiable=!0},handleRepairAddClose:function(){this.repairAdd.visiable=!1},handleRepairAddSuccess:function(){this.repairAdd.visiable=!1,this.$message.success("新增成功"),this.housesInfoByOwnerId()},view:function(e){this.housesView.data=e,this.housesView.visiable=!0},handleHousesViewClose:function(){this.housesView.visiable=!1},housesInfoByOwnerId:function(){var e=this;this.$get("/cos/houses-info/housesListByOwnerId",{userId:this.currentUser.userId}).then(function(t){e.housesList=t.data.data})}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{background:"#ECECEC",padding:"30px","margin-top":"30px",width:"100%"}},[a("a-row",{attrs:{gutter:55}},[0===e.housesList.length?a("a-col",{attrs:{span:24}},[a("div",{staticStyle:{color:"rgba(0,0,0,.85)","font-size":"24px","line-height":"1.8","text-align":"center",height:"250px"}},[a("p",{staticStyle:{"margin-top":"100px"}},[e._v("暂无房屋")])])]):e._e(),e._v(" "),e._l(e.housesList,function(t,i){return a("a-col",{key:i,attrs:{span:8}},[a("a-card",{attrs:{hoverable:"",bordered:!1}},[a("img",{staticStyle:{height:"180px","object-fit":"cover"},attrs:{slot:"cover",alt:"example",src:"http://backend.my.org/imagesWeb/"+t.images.split(",")[0]},slot:"cover"}),e._v(" "),a("template",{staticClass:"ant-card-actions",slot:"actions"},[null===t.repairStatus?a("a-icon",{key:"setting",attrs:{type:"setting"},on:{click:function(a){e.add(t)}}}):e._e(),e._v(" "),null!==t.repairStatus?a("a-icon",{key:"edit",attrs:{type:"edit"},on:{click:function(a){e.edit(t)}}}):e._e(),e._v(" "),a("a-icon",{key:"ellipsis",attrs:{type:"ellipsis"},on:{click:function(a){e.view(t)}}})],1),e._v(" "),a("a-card-meta",{attrs:{title:t.number+"室",description:t.address}}),e._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[0==t.repairStatus?a("a-tag",{attrs:{color:"#f50"}},[e._v("未派单")]):e._e(),e._v(" "),1==t.repairStatus?a("a-tag",{attrs:{color:"#108ee9"}},[e._v("已派单")]):e._e()],1)],2)],1)})],2),e._v(" "),a("houses-view",{attrs:{housesShow:e.housesView.visiable,housesData:e.housesView.data},on:{close:e.handleHousesViewClose}}),e._v(" "),e.repairAdd.visiable?a("repair-add",{attrs:{housesData:e.repairAdd.data,repairAddVisiable:e.repairAdd.visiable},on:{close:e.handleRepairAddClose,success:e.handleRepairAddSuccess}}):e._e(),e._v(" "),a("repair-edit",{ref:"repairEdit",attrs:{housesData:e.repairEdit.data,repairEditVisiable:e.repairEdit.visiable},on:{close:e.handleRepairEditClose,success:e.handleRepairEditSuccess}})],1)},staticRenderFns:[]},d=a("VU/8")(c,p,!1,function(e){a("7/Ej")},"data-v-134883f6",null);t.default=d.exports}});