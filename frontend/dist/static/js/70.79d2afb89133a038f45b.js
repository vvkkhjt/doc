webpackJsonp([70],{KBf7:function(a,t,e){"use strict";function s(a){return new g.a(function(t,e){var s=new FileReader;s.readAsDataURL(a),s.onload=function(){return t(s.result)},s.onerror=function(a){return e(a)}})}Object.defineProperty(t,"__esModule",{value:!0});var i=e("fZjL"),r=e.n(i),o=e("+6Bu"),n=e.n(o),l=e("Xxa5"),c=e.n(l),h=e("exGp"),m=e.n(h),d=e("Dd8w"),u=e.n(d),v=e("//Fk"),g=e.n(v),p=e("NYxO"),f={labelCol:{span:24},wrapperCol:{span:24}},b={name:"rentEdit",props:{rentEditVisiable:{default:!1}},computed:u()({},Object(p.c)({currentUser:function(a){return a.account.user}}),{show:{get:function(){return this.rentEditVisiable},set:function(){}}}),data:function(){return{rowId:null,formItemLayout:f,form:this.$form.createForm(this),loading:!1,fileList:[],previewVisible:!1,previewImage:"",houseList:[],houseInfo:null,houseAddress:"",hasTelevision:!0,hasAirConditioner:!0,hasWardrobe:!0,hasBed:!0,hasBathroom:!0,hasDoorLock:!0,hasBalcony:!0,hasHeating:!0,hasRefrigerator:!0,hasWashingMachine:!0,hasWaterHeater:!0,hasBroadband:!0,hasSofa:!0,hasRangeHood:!0,hasGasStoves:!0,hasCook:!0,housesList:[]}},mounted:function(){this.housesInfoByOwnerId()},methods:{housesInfoByOwnerId:function(){var a=this;this.$get("/cos/houses-info/housesListByOwnerId",{userId:this.currentUser.userId}).then(function(t){a.housesList=t.data.data})},handleSearch:function(a){var t=this;this.$get("/cos/house-info/remote",{address:a}).then(function(a){t.houseList=a.data.data})},handleChange:function(a){this.houseCode=a},handleCancel:function(){this.previewVisible=!1},handlePreview:function(a){var t=this;return m()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.url||a.preview){e.next=4;break}return e.next=3,s(a.originFileObj);case 3:a.preview=e.sent;case 4:t.previewImage=a.url||a.preview,t.previewVisible=!0;case 6:case"end":return e.stop()}},e,t)}))()},picHandleChange:function(a){var t=a.fileList;this.fileList=t},imagesInit:function(a){if(null!==a&&""!==a){var t=[];a.split(",").forEach(function(a,e){t.push({uid:e,name:a,status:"done",url:"http://backend.my.org/imagesWeb/"+a})}),this.fileList=t}},setFormValues:function(a){var t=this,e=n()(a,[]);this.rowId=e.id;var s=["title","houseId","rentPrice","content","contact","phone","type","images"],i={};this.setFormDeviceValues(e),r()(e).forEach(function(a){"images"===a&&(t.fileList=[],t.imagesInit(e.images)),"type"===a&&(e[a]=e[a].toString()),-1!==s.indexOf(a)&&(t.form.getFieldDecorator(a),i[a]=e[a])}),this.form.setFieldsValue(i)},reset:function(){this.loading=!1,this.form.resetFields()},onClose:function(){this.reset(),this.$emit("close")},setFormDeviceValues:function(a){this.hasTelevision=1===a.hasTelevision,this.hasAirConditioner=1===a.hasAirConditioner,this.hasWardrobe=1===a.hasWardrobe,this.hasBed=1===a.hasBed,this.hasBathroom=1===a.hasBathroom,this.hasDoorLock=1===a.hasDoorLock,this.hasBalcony=1===a.hasBalcony,this.hasHeating=1===a.hasHeating,this.hasRefrigerator=1===a.hasRefrigerator,this.hasWashingMachine=1===a.hasWashingMachine,this.hasWaterHeater=1===a.hasWaterHeater,this.hasBroadband=1===a.hasBroadband,this.hasSofa=1===a.hasSofa,this.hasRangeHood=1===a.hasRangeHood,this.hasGasStoves=1===a.hasGasStoves,this.hasCook=1===a.hasCook},setValues:function(a){a.hasTelevision=!0===this.hasTelevision?1:2,a.hasAirConditioner=!0===this.hasAirConditioner?1:2,a.hasWardrobe=!0===this.hasWardrobe?1:2,a.hasBed=!0===this.hasBed?1:2,a.hasBathroom=!0===this.hasBathroom?1:2,a.hasDoorLock=!0===this.hasDoorLock?1:2,a.hasBalcony=!0===this.hasBalcony?1:2,a.hasHeating=!0===this.hasHeating?1:2,a.hasRefrigerator=!0===this.hasRefrigerator?1:2,a.hasWashingMachine=!0===this.hasWashingMachine?1:2,a.hasWaterHeater=!0===this.hasWaterHeater?1:2,a.hasBroadband=!0===this.hasBroadband?1:2,a.hasSofa=!0===this.hasSofa?1:2,a.hasRangeHood=!0===this.hasRangeHood?1:2,a.hasGasStoves=!0===this.hasGasStoves?1:2,a.hasCook=!0===this.hasCook?1:2},handleSubmit:function(){var a=this,t=[];this.fileList.forEach(function(a){void 0!==a.response?t.push(a.response):t.push(a.name)}),this.form.validateFields(function(e,s){s.id=a.rowId,s.images=t.length>0?t.join(","):null,a.setValues(s),e||(a.loading=!0,a.$put("/cos/rent-info",u()({},s)).then(function(t){a.reset(),a.$emit("success")}).catch(function(){a.loading=!1}))})}}},_={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("a-modal",{attrs:{title:"修改出租信息",width:800},on:{cancel:a.onClose},model:{value:a.show,callback:function(t){a.show=t},expression:"show"}},[e("template",{slot:"footer"},[e("a-button",{key:"back",on:{click:a.onClose}},[a._v("\n      取消\n    ")]),a._v(" "),e("a-button",{key:"submit",attrs:{type:"primary",loading:a.loading},on:{click:a.handleSubmit}},[a._v("\n      修改\n    ")])],1),a._v(" "),e("a-form",{attrs:{form:a.form,layout:"vertical"}},[e("a-row",{attrs:{gutter:20}},[e("a-col",{attrs:{span:12}},[e("a-form-item",a._b({attrs:{label:"出租标题"}},"a-form-item",a.formItemLayout,!1),[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入出租标题!"}]}],expression:"[\n          'title',\n          { rules: [{ required: true, message: '请输入出租标题!' }] }\n          ]"}]})],1)],1),a._v(" "),e("a-col",{attrs:{span:12}},[e("a-form-item",a._b({attrs:{label:"选择房屋"}},"a-form-item",a.formItemLayout,!1),[e("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["houseId",{rules:[{required:!0,message:"请输入联系人!"}]}],expression:"[\n          'houseId',\n          { rules: [{ required: true, message: '请输入联系人!' }] }\n          ]"}],staticStyle:{width:"100%"},attrs:{showSearch:"",optionFilterProp:"children"}},a._l(a.housesList,function(t,s){return e("a-select-option",{key:s,attrs:{value:t.id}},[a._v(a._s(t.address))])}))],1)],1),a._v(" "),e("a-col",{attrs:{span:12}},[e("a-form-item",a._b({attrs:{label:"类型"}},"a-form-item",a.formItemLayout,!1),[e("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{rules:[{required:!0,message:"请输入类型s!"}]}],expression:"[\n            'type',\n            { rules: [{ required: true, message: '请输入类型s!' }] }\n            ]"}]},[e("a-select-option",{attrs:{value:"1"}},[a._v("出租")]),a._v(" "),e("a-select-option",{attrs:{value:"2"}},[a._v("售卖")])],1)],1)],1),a._v(" "),e("a-col",{attrs:{span:12}},[e("a-form-item",a._b({attrs:{label:"联系人"}},"a-form-item",a.formItemLayout,!1),[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contact",{rules:[{required:!0,message:"请输入联系人!"}]}],expression:"[\n          'contact',\n          { rules: [{ required: true, message: '请输入联系人!' }] }\n          ]"}]})],1)],1),a._v(" "),e("a-col",{attrs:{span:12}},[e("a-form-item",a._b({attrs:{label:"联系方式"}},"a-form-item",a.formItemLayout,!1),[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone",{rules:[{required:!0,message:"请输入联系方式!"}]}],expression:"[\n          'phone',\n          { rules: [{ required: true, message: '请输入联系方式!' }] }\n          ]"}]})],1)],1),a._v(" "),e("a-col",{attrs:{span:12}},[e("a-form-item",{attrs:{label:"租金"}},[e("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["rentPrice"],expression:"[\n          'rentPrice'\n          ]"}],staticStyle:{width:"100%"},attrs:{min:1,step:1}})],1)],1),a._v(" "),e("a-col",{staticStyle:{margin:"25px 0px","font-size":"13px","font-family":"SimHei"},attrs:{span:24}},[e("a-row",{attrs:{gutter:10}},[e("a-col",{staticStyle:{"text-align":"center"},attrs:{span:3}},[e("div",[a._v("床")]),a._v(" "),e("div",{staticStyle:{"margin-bottom":"8px"}},[e("a-switch",{attrs:{size:"small"},model:{value:a.hasBed,callback:function(t){a.hasBed=t},expression:"hasBed"}})],1),a._v(" "),e("img",{attrs:{src:"http://backend.my.org/imagesWeb/chuang.png"}})]),a._v(" "),e("a-col",{staticStyle:{"text-align":"center"},attrs:{span:3}},[e("div",[a._v("冰箱")]),a._v(" "),e("div",{staticStyle:{"margin-bottom":"8px"}},[e("a-switch",{attrs:{size:"small"},model:{value:a.hasRefrigerator,callback:function(t){a.hasRefrigerator=t},expression:"hasRefrigerator"}})],1),a._v(" "),e("img",{attrs:{src:"http://backend.my.org/imagesWeb/dankaimenbingxiang.png"}})]),a._v(" "),e("a-col",{staticStyle:{"text-align":"center"},attrs:{span:3}},[e("div",[a._v("空调")]),a._v(" "),e("div",{staticStyle:{"margin-bottom":"8px"}},[e("a-switch",{attrs:{size:"small"},model:{value:a.hasAirConditioner,callback:function(t){a.hasAirConditioner=t},expression:"hasAirConditioner"}})],1),a._v(" "),e("img",{attrs:{src:"http://backend.my.org/imagesWeb/kongtiao.png"}})]),a._v(" "),e("a-col",{staticStyle:{"text-align":"center"},attrs:{span:3}},[e("div",[a._v("宽带")]),a._v(" "),e("div",{staticStyle:{"margin-bottom":"8px"}},[e("a-switch",{attrs:{size:"small"},model:{value:a.hasBroadband,callback:function(t){a.hasBroadband=t},expression:"hasBroadband"}})],1),a._v(" "),e("img",{attrs:{src:"http://backend.my.org/imagesWeb/kuandai.png"}})]),a._v(" "),e("a-col",{staticStyle:{"text-align":"center"},attrs:{span:3}},[e("div",[a._v("阳台")]),a._v(" "),e("div",{staticStyle:{"margin-bottom":"8px"}},[e("a-switch",{attrs:{size:"small"},model:{value:a.hasBalcony,callback:function(t){a.hasBalcony=t},expression:"hasBalcony"}})],1),a._v(" "),e("img",{attrs:{src:"http://backend.my.org/imagesWeb/loutianyangtai.png"}})]),a._v(" "),e("a-col",{staticStyle:{"text-align":"center"},attrs:{span:3}},[e("div",[a._v("燃气灶")]),a._v(" "),e("div",{staticStyle:{"margin-bottom":"8px"}},[e("a-switch",{attrs:{size:"small"},model:{value:a.hasGasStoves,callback:function(t){a.hasGasStoves=t},expression:"hasGasStoves"}})],1),a._v(" "),e("img",{attrs:{src:"http://backend.my.org/imagesWeb/ranqizao.png"}})]),a._v(" "),e("a-col",{staticStyle:{"text-align":"center"},attrs:{span:3}},[e("div",[a._v("热水器")]),a._v(" "),e("div",{staticStyle:{"margin-bottom":"8px"}},[e("a-switch",{attrs:{size:"small"},model:{value:a.hasWaterHeater,callback:function(t){a.hasWaterHeater=t},expression:"hasWaterHeater"}})],1),a._v(" "),e("img",{attrs:{src:"http://backend.my.org/imagesWeb/reshuiqi.png"}})]),a._v(" "),e("a-col",{staticStyle:{"text-align":"center"},attrs:{span:3}},[e("div",[a._v("沙发")]),a._v(" "),e("div",{staticStyle:{"margin-bottom":"8px"}},[e("a-switch",{attrs:{size:"small"},model:{value:a.hasSofa,callback:function(t){a.hasSofa=t},expression:"hasSofa"}})],1),a._v(" "),e("img",{attrs:{src:"http://backend.my.org/imagesWeb/shafa_1.png"}})]),a._v(" "),e("a-col",{staticStyle:{margin:"20px 0px"},attrs:{span:24}}),a._v(" "),e("a-col",{staticStyle:{"text-align":"center"},attrs:{span:3}},[e("div",[a._v("做饭")]),a._v(" "),e("div",{staticStyle:{"margin-bottom":"8px"}},[e("a-switch",{attrs:{size:"small"},model:{value:a.hasCook,callback:function(t){a.hasCook=t},expression:"hasCook"}})],1),a._v(" "),e("img",{attrs:{src:"http://backend.my.org/imagesWeb/weibolu.png"}})]),a._v(" "),e("a-col",{staticStyle:{"text-align":"center"},attrs:{span:3}},[e("div",[a._v("卫生间")]),a._v(" "),e("div",{staticStyle:{"margin-bottom":"8px"}},[e("a-switch",{attrs:{size:"small"},model:{value:a.hasBathroom,callback:function(t){a.hasBathroom=t},expression:"hasBathroom"}})],1),a._v(" "),e("img",{attrs:{src:"http://backend.my.org/imagesWeb/weiyu.png"}})]),a._v(" "),e("a-col",{staticStyle:{"text-align":"center"},attrs:{span:3}},[e("div",[a._v("电视")]),a._v(" "),e("div",{staticStyle:{"margin-bottom":"8px"}},[e("a-switch",{attrs:{size:"small"},model:{value:a.hasTelevision,callback:function(t){a.hasTelevision=t},expression:"hasTelevision"}})],1),a._v(" "),e("img",{attrs:{src:"http://backend.my.org/imagesWeb/dianshi.png"}})]),a._v(" "),e("a-col",{staticStyle:{"text-align":"center"},attrs:{span:3}},[e("div",[a._v("洗衣机")]),a._v(" "),e("div",{staticStyle:{"margin-bottom":"8px"}},[e("a-switch",{attrs:{size:"small"},model:{value:a.hasWashingMachine,callback:function(t){a.hasWashingMachine=t},expression:"hasWashingMachine"}})],1),a._v(" "),e("img",{attrs:{src:"http://backend.my.org/imagesWeb/xiyiji.png"}})]),a._v(" "),e("a-col",{staticStyle:{"text-align":"center"},attrs:{span:3}},[e("div",[a._v("衣柜")]),a._v(" "),e("div",{staticStyle:{"margin-bottom":"8px"}},[e("a-switch",{attrs:{size:"small"},model:{value:a.hasWardrobe,callback:function(t){a.hasWardrobe=t},expression:"hasWardrobe"}})],1),a._v(" "),e("img",{attrs:{src:"http://backend.my.org/imagesWeb/yigui.png"}})]),a._v(" "),e("a-col",{staticStyle:{"text-align":"center"},attrs:{span:3}},[e("div",[a._v("油烟机")]),a._v(" "),e("div",{staticStyle:{"margin-bottom":"8px"}},[e("a-switch",{attrs:{size:"small"},model:{value:a.hasRangeHood,callback:function(t){a.hasRangeHood=t},expression:"hasRangeHood"}})],1),a._v(" "),e("img",{attrs:{src:"http://backend.my.org/imagesWeb/youyanji.png"}})]),a._v(" "),e("a-col",{staticStyle:{"text-align":"center"},attrs:{span:3}},[e("div",[a._v("暖气")]),a._v(" "),e("div",{staticStyle:{"margin-bottom":"8px"}},[e("a-switch",{attrs:{size:"small"},model:{value:a.hasHeating,callback:function(t){a.hasHeating=t},expression:"hasHeating"}})],1),a._v(" "),e("img",{attrs:{src:"http://backend.my.org/imagesWeb/zaotai.png"}})]),a._v(" "),e("a-col",{staticStyle:{"text-align":"center"},attrs:{span:3}},[e("div",[a._v("智能门锁")]),a._v(" "),e("div",{staticStyle:{"margin-bottom":"8px"}},[e("a-switch",{attrs:{size:"small"},model:{value:a.hasDoorLock,callback:function(t){a.hasDoorLock=t},expression:"hasDoorLock"}})],1),a._v(" "),e("img",{attrs:{src:"http://backend.my.org/imagesWeb/zhinengmensuo.png"}})])],1)],1),a._v(" "),e("a-col",{attrs:{span:24}},[e("a-form-item",a._b({attrs:{label:"出租要求"}},"a-form-item",a.formItemLayout,!1),[e("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"请输入!"}]}],expression:"[\n          'content',\n           { rules: [{ required: true, message: '请输入!' }] }\n          ]"}],attrs:{rows:4}})],1)],1),a._v(" "),e("a-col",{attrs:{span:24}},[e("a-form-item",a._b({attrs:{label:"房间图片"}},"a-form-item",a.formItemLayout,!1),[e("a-upload",{attrs:{name:"avatar",action:"http://backend.my.org/file/fileUpload/","list-type":"picture-card","file-list":a.fileList},on:{preview:a.handlePreview,change:a.picHandleChange}},[a.fileList.length<8?e("div",[e("a-icon",{attrs:{type:"plus"}}),a._v(" "),e("div",{staticClass:"ant-upload-text"},[a._v("\n                Upload\n              ")])],1):a._e()]),a._v(" "),e("a-modal",{attrs:{visible:a.previewVisible,footer:null},on:{cancel:a.handleCancel}},[e("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:a.previewImage}})])],1)],1)],1)],1)],2)},staticRenderFns:[]},y=e("VU/8")(b,_,!1,function(a){e("Tph1")},"data-v-3b5a134b",null);t.default=y.exports},Tph1:function(a,t){}});