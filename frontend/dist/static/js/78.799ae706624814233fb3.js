webpackJsonp([78],{"9hcn":function(a,t){},R6G1:function(a,t,e){"use strict";function r(a){return new d.a(function(t,e){var r=new FileReader;r.readAsDataURL(a),r.onload=function(){return t(r.result)},r.onerror=function(a){return e(a)}})}Object.defineProperty(t,"__esModule",{value:!0});var i=e("woOf"),n=e.n(i),s=e("Xxa5"),o=e.n(s),p=e("exGp"),l=e.n(p),c=e("Dd8w"),v=e.n(c),u=e("//Fk"),d=e.n(u),_=e("NYxO"),f={labelCol:{span:24},wrapperCol:{span:24}},h={name:"RepairEdit",props:{repairEditVisiable:{default:!1},housesData:{type:Object}},watch:{repairEditVisiable:function(a){var t=this;a&&this.$get("/cos/repair-info/repairInfoById",{repairId:this.housesData.repairId}).then(function(a){t.repairData=a.data,null!==t.repairData.images&&""!==t.repairData.images&&t.imagesInit(t.repairData.images)})}},computed:v()({},Object(_.c)({currentUser:function(a){return a.account.user}}),{show:{get:function(){return this.repairEditVisiable},set:function(){}}}),mounted:function(){this.getWorkerList()},data:function(){return{rowId:null,formItemLayout:f,form:this.$form.createForm(this),loading:!1,fileList:[],previewVisible:!1,previewImage:"",workerId:null,repairData:null,workerList:""}},methods:{repairDone:function(){var a=this;this.$get("/cos/repair-info/down",{repairId:this.repairData.id}).then(function(t){a.$emit("success")})},getWorkerList:function(){var a=this;this.$get("/cos/worker-info/list",{type:2}).then(function(t){a.workerList=t.data.data})},handleCancel:function(){this.previewVisible=!1},handlePreview:function(a){var t=this;return l()(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.url||a.preview){e.next=4;break}return e.next=3,r(a.originFileObj);case 3:a.preview=e.sent;case 4:t.previewImage=a.url||a.preview,t.previewVisible=!0;case 6:case"end":return e.stop()}},e,t)}))()},picHandleChange:function(a){var t=a.fileList;this.fileList=t},imagesInit:function(a){if(null!==a&&""!==a){var t=[];a.split(",").forEach(function(a,e){t.push({uid:e,name:a,status:"done",url:"http://backend.my.org/imagesWeb/"+a})}),this.fileList=t}},reset:function(){this.loading=!1,this.form.resetFields()},onClose:function(){this.reset(),this.$emit("close")},handleSubmit:function(){var a=this,t=n()(this.repairData,{});null!==this.workerId?(t.worker=this.workerId,this.$put("/cos/repair-info",t).then(function(t){a.workerId=null,a.$emit("success")}).catch(function(){a.loading=!1})):this.$message.warning("请选择工作人员！")}}},g={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("a-modal",{attrs:{title:"查看维修信息",width:800},on:{cancel:a.onClose},model:{value:a.show,callback:function(t){a.show=t},expression:"show"}},[e("template",{slot:"footer"},[e("a-button",{key:"back",on:{click:a.onClose}},[a._v("\n      关闭\n    ")]),a._v(" "),1==a.repairData.repairStatus?e("a-button",{on:{click:a.repairDone}},[a._v("\n      维修完成\n    ")]):a._e()],1),a._v(" "),null!==a.repairData?e("div",{staticStyle:{"font-size":"13px"}},[e("div",{staticStyle:{"font-size":"25px",color:"#000c17","text-align":"center"}},[0==a.repairData.repairStatus?e("p",[a._v("请稍后，正在为您指定维修人员")]):a._e(),a._v(" "),1==a.repairData.repairStatus?e("p",[a._v("维修人员正在路上！")]):a._e()]),a._v(" "),e("a-row",{staticStyle:{"padding-left":"24px","padding-right":"24px"}},[e("a-col",{staticStyle:{"margin-bottom":"15px"}},[e("span",{staticStyle:{"font-size":"15px","font-weight":"650",color:"#000c17"}},[a._v("基础信息")])]),a._v(" "),e("a-col",{attrs:{span:8}},[e("b",[a._v("业主姓名：")]),a._v("\n        "+a._s(a.repairData.name)+"\n      ")]),a._v(" "),e("a-col",{attrs:{span:8}},[e("b",[a._v("联系电话：")]),a._v("\n        "+a._s(a.repairData.phone)+"\n      ")]),a._v(" "),e("a-col",{attrs:{span:8}},[e("b",[a._v("上次登陆时间：")]),a._v("\n        "+a._s(null!==a.repairData.lastTime?a.repairData.lastTime:"- -")+"\n      ")])],1),a._v(" "),e("br"),a._v(" "),e("a-row",{staticStyle:{"padding-left":"24px","padding-right":"24px"}},[e("a-col",{attrs:{span:8}},[e("b",[a._v("维修编号：")]),a._v("\n        "+a._s(a.repairData.code)+"\n      ")]),a._v(" "),e("a-col",{attrs:{span:16}},[e("b",[a._v("维修内容：")]),a._v("\n        "+a._s(a.repairData.content)+"\n      ")])],1),a._v(" "),e("br"),a._v(" "),e("a-row",{staticStyle:{"padding-left":"24px","padding-right":"24px"}},[e("a-col",{attrs:{span:24}},[e("a-upload",{attrs:{name:"avatar",action:"http://backend.my.org/file/fileUpload/","list-type":"picture-card",disabled:"","file-list":a.fileList},on:{preview:a.handlePreview,change:a.picHandleChange}}),a._v(" "),e("a-modal",{attrs:{visible:a.previewVisible,footer:null},on:{cancel:a.handleCancel}},[e("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:a.previewImage}})])],1)],1),a._v(" "),e("br"),a._v(" "),e("a-row",{staticStyle:{"padding-left":"24px","padding-right":"24px"}},[e("a-col",{attrs:{span:8}},[e("b",[a._v("维修状态：")]),a._v(" "),0==a.repairData.repairStatus?e("span",[a._v("未派修")]):a._e(),a._v(" "),1==a.repairData.repairStatus?e("span",[a._v("已派修")]):a._e(),a._v(" "),2==a.repairData.repairStatus?e("span",[a._v("已完成")]):a._e()]),a._v(" "),e("a-col",{attrs:{span:16}},[e("b",[a._v("创建时间：")]),a._v("\n        "+a._s(a.repairData.createDate)+"\n      ")])],1),a._v(" "),e("br"),a._v(" "),e("a-row",{staticStyle:{"padding-left":"24px","padding-right":"24px"}},[e("a-col",{attrs:{span:8}},[e("b",[a._v("房屋地址：")]),a._v(" "),e("a-tooltip",[e("template",{slot:"title"},[a._v("\n            "+a._s(a.repairData.address)+"\n          ")]),a._v("\n          "+a._s(a.repairData.address.slice(0,10))+" ...\n        ")],2)],1),a._v(" "),e("a-col",{attrs:{span:8}},[e("b",[a._v("房间号：")]),a._v("\n        "+a._s(a.repairData.number)+" 室\n      ")]),a._v(" "),e("a-col",{attrs:{span:8}},[e("b",[a._v("楼层：")]),a._v("\n        "+a._s(a.repairData.floor)+" 层\n      ")])],1),a._v(" "),e("br"),a._v(" "),e("br"),a._v(" "),null!==a.repairData.worker?e("a-row",{staticStyle:{"padding-left":"24px","padding-right":"24px"}},[e("a-col",{staticStyle:{"margin-bottom":"15px"}},[e("span",{staticStyle:{"font-size":"15px","font-weight":"650",color:"#000c17"}},[a._v("维修员工信息")])]),a._v(" "),e("a-col",{attrs:{span:8}},[e("b",[a._v("员工姓名：")]),a._v(" "),e("a-popover",[e("template",{slot:"content"},[null!==a.repairData.workerImage?e("a-avatar",{attrs:{shape:"square",size:132,icon:"user",src:"http://backend.my.org/imagesWeb/"+a.repairData.workerImage.split(",")[0]}}):e("a-avatar",{attrs:{shape:"square",size:132,icon:"user"}})],1),a._v(" "),e("a",[a._v(a._s(null!==a.repairData.workerName?a.repairData.workerName:"- -"))])],2)],1),a._v(" "),e("a-col",{attrs:{span:8}},[e("b",[a._v("联系电话：")]),a._v("\n        "+a._s(a.repairData.workerPhone)+"\n      ")])],1):a._e(),a._v(" "),e("br"),a._v(" "),e("br")],1):a._e()],2)},staticRenderFns:[]},w=e("VU/8")(h,g,!1,function(a){e("9hcn")},"data-v-265852c0",null);t.default=w.exports}});